@model IEnumerable<PointStore>

<button class="btn btn-gradient mb-2" id="btnAll">全部</button>

@foreach(var cate in Model.OrderBy(s => s.Category).Select(s => s.Category).Distinct())
{
    <button class="btn btn-gradient mb-2 btn-cate" data-cate="@cate">@cate</button>
}

<div class="col-12" id="pointsContentBody">
    @foreach (var product in Model.OrderBy(s => s.Category).ThenBy(s => s.ProductPrice))
    {
            <div class="card mb-3">
                <div class="row g-0">
                    <div class="col-md-4">
                        <img src="~/images/@product.ProductImage" class="img-fluid rounded-start" style="width:300px" alt="@product.ProductName" title="@product.ProductName">
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <span class="position-absolute end-0 me-2">@product.Category</span>
                            <h5 class="card-title text-gradient fs-3">@product.ProductName</h5>
                            <p class="card-text">@product.ProductDescription</p>
                            <p class="card-text text-gradient">兌換需要 @product.ProductPrice 點數</p>
                            <button class="btn btn-gradient position-absolute bottom-0 end-0 mb-1 me-1">兌換</button>
                        </div>
                    </div>
                </div>
            </div>
        @* @foreach (var product in group)
        {
        } *@
    }
</div>

<script>
    $(function () {
        $("#btnAll").on("click", function () {
            $("#pointsShopSide").trigger("click");
        });

        $(".btn-cate").on("click", function () {
            $.ajax({
                type: "GET",
                url: `@Url.Action("pointsShopContentBody", "Points", new { cate = "cateVal" })`
                .replace("cateVal", $(this).data("cate")),
            }).done(function (data) {
                $("#pointsContentBody").html(data);
            }).fail(function (err) {
                alert(err.responseText);
            });
        });
    });

</script>